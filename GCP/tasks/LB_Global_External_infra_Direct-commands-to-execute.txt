
echo $PROJECT_ID
gcloud config set project prod-gcp-2026
PROJECT_ID=$(gcloud config get-value project)
echo $PROJECT_ID

gcloud compute networks create glb-vpc --subnet-mode=custom


gcloud compute networks subnets create glb-usa-subnet --region="us-central1" --range="10.1.0.0/16" --network="glb-vpc"
gcloud compute networks subnets create glb-singapore-subnet --region="asia-southeast1" --range="10.2.0.0/16" --network="glb-vpc"


gcloud compute firewall-rules create glb-allow-http-icmp --allow="tcp:80,tcp:22,icmp" --source-ranges="0.0.0.0/0" --network="glb-vpc"
gcloud compute firewall-rules create glb-google-healthchecks --allow="tcp" --source-ranges="130.211.0.0/22,35.191.0.0/16" --network="glb-vpc"


gcloud compute instance-templates create glb-usa-instance-template --region="us-central1" --instance-template-region="us-central1" --machine-type="e2-micro" --network="glb-vpc" --subnet="glb-usa-subnet" --metadata-from-file startup-script="startup-script.sh"


gcloud compute instance-templates create glb-singapore-instance-template --region="asia-southeast1" --instance-template-region="asia-southeast1" --machine-type="e2-micro" --network="glb-vpc" --subnet="glb-singapore-subnet" --metadata-from-file startup-script="startup-script.sh"


gcloud compute health-checks create http glb-healthcheck --global --port="80" --request-path="/"


gcloud compute instance-groups managed create glb-usa-mig --base-instance-name="glb-usa-vm" --template=projects/$PROJECT_ID/regions/us-central1/instanceTemplates/glb-usa-instance-template --size=2 --zones="us-central1-b,us-central1-c" --health-check="glb-healthcheck" --initial-delay="300"

gcloud compute instance-groups managed create glb-singapore-mig --base-instance-name="glb-singapore-vm" --template=projects/$PROJECT_ID/regions/asia-southeast1/instanceTemplates/glb-singapore-instance-template --size=2 --zones="asia-southeast1-a,asia-southeast1-b" --health-check="glb-healthcheck" --initial-delay="300"


gcloud compute instance-groups managed set-named-ports glb-usa-mig --named-ports="http:80" --region="us-central1"
gcloud compute instance-groups managed set-named-ports glb-singapore-mig --named-ports="http:80" --region="asia-southeast1" 


gcloud compute addresses create vijayfmw12-glb-ip --global



