<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Residents List (Paginated)</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <h1>Residents of Tripura Homes (Paginated)</h1>

    <!-- Pagination Navigation -->
    <form th:action="@{/residents/page}" method="get">
        <label for="size">Entries per page:</label>
	<select name="size" id="size" onchange="this.form.submit()">
    		<option th:value="5" th:selected="${size == 5}">5</option>
		<option th:value="10" th:selected="${size == 10}">10</option>
		<option th:value="20" th:selected="${size == 20}">20</option>
	</select>
        <input type="hidden" name="page" th:value="${currentPage}" />
    </form>

    <br/>

    <!-- Residents Table -->
    <table border="1">
        <thead>
            <tr>
                <th>S.No</th>
                <th>Owner Name</th>
                <th>Flat No</th>
                <th>Contact No</th>
                <th>Email</th>
                <th>Road No</th>
                <th>Facing</th>
                <th>Status</th>
                <th>Remarks</th>
                <th>Created On</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="resident : ${residentsPage.content}">
                <td th:text="${resident.sNo}">1</td>
                <td th:text="${resident.ownerName}">John Doe</td>
                <td th:text="${resident.flatNo}">101</td>
                <td th:text="${resident.contactNo}">1234567890</td>
                <td th:text="${resident.email}">john@example.com</td>
                <td th:text="${resident.roadNo}">5</td>
                <td th:text="${resident.facing}">East</td>
                <td th:text="${resident.status}">Active</td>
                <td th:text="${resident.remarks}">None</td>
                <td th:text="${#temporals.format(resident.createdOn, 'yyyy-MM-dd HH:mm')}">2025-06-05</td>
            </tr>
        </tbody>
    </table>

    <br/>

    <!-- Pagination Buttons -->
    <div>
        <span th:if="${currentPage > 0}">
            <a th:href="@{/residents/page(page=${currentPage - 1}, size=${residentsPage.size})}">Previous</a>
        </span>

        <span th:each="i : ${#numbers.sequence(0, totalPages - 1)}">
            <a th:href="@{/residents/page(page=${i}, size=${residentsPage.size})}"
               th:text="${i + 1}"
               th:classappend="${i == currentPage} ? 'active-page' : ''">1</a>
        </span>

        <span th:if="${currentPage + 1 < totalPages}">
            <a th:href="@{/residents/page(page=${currentPage + 1}, size=${residentsPage.size})}">Next</a>
        </span>
    </div>

    <br/>
    <a th:href="@{/residents}">Back to Normal View</a>
</body>
</html>
